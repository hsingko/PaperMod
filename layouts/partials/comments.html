{{- /* Comments area start */ -}}
{{- /* to add comments read => https://gohugo.io/content-management/comments/ */ -}}

<!-- <script src="https://utteranc.es/client.js" -->
<!--         repo="hsingko/hsingko.github.io" -->
<!--         issue-term="pathname" -->
<!--         theme="github-light" -->
<!--         crossorigin="anonymous" -->
<!--         async> -->
<!-- </script> -->
<script type="text/javascript">
        let giscusTheme = localStorage.getItem("pref-theme") === "dark" ? 'dark_dimmed' : 'light';
        let giscusAttributes = {
            "src": "https://giscus.app/client.js",
            "data-repo": "hsingko/hsingko.github.io",
            "data-repo-id": "MDEwOlJlcG9zaXRvcnkzMTA1MTA3ODA=",
            "data-category": "Announcements",
            "data-category-id": "DIC_kwDOEoIEvM4CSsPU",
            "data-mapping": "pathname",
            "data-reactions-enabled": "1",
            "data-emit-metadata": "0",
            "data-theme": giscusTheme === null ? "light" : giscusTheme,
            "data-lang": "zh-CN",
            "crossorigin": "anonymous",
            "data-loading": "lazy",
            "async": "",
        };

        let giscusScript = document.createElement("script");
        Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
        var article = document.getElementsByTagName("article")[0].appendChild(giscusScript);
        function changeGiscusTheme () {
            const theme = localStorage.getItem("pref-theme") === "dark" ?  'light' : 'dark_dimmed'
            
            function sendMessage(message) {
                const iframe = document.querySelector('iframe.giscus-frame');
                if (!iframe) return;
                iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
            }
        
        sendMessage({
        setConfig: {
        theme: theme
        }
        });
        }
        const toggle = document.querySelector('#theme-toggle');
        if (toggle){
        toggle.addEventListener('click', changeGiscusTheme)  
        }
</script>
{{- /* Comments area end */ -}}
